# 餅積 - Kagamimochi Stacker

## 概要 (Overview)
「餅積 (Kagamimochi Stacker)」は、左右に動く餅をタイミングよくタップして落下させ、土台の上に積み上げていく物理演算パズルゲームです。お正月の伝統である鏡餅をモチーフにしており、高く積み上げるほど「東京タワー」や「富士山」など、様々な高さと比較される演出が楽しめます。

## 仕様 (Specifications)

### 技術スタック
- **言語**: JavaScript (ES Modules)
- **物理エンジン**: Matter.js
- **バンドラー**: Vite
- **スタイリング**: Vanilla CSS

### ゲームの挙動・ルール (Game Behavior)
1.  **開始**:
    - 「はじめる」ボタンを押すとゲームがスタートします。
    - キャンバス上部に最初の餅が出現し、左右に往復移動します。

2.  **操作**:
    - 画面（ウィンドウ全体）をタップ、またはクリックすると、その瞬間の位置から餅が垂直に落下します。
    - 餅は物理演算の影響を受けます（重力、摩擦、反発）。

3.  **判定**:
    - **成功**: 餅が下の物体（土台、または既にある餅）に着地し、静止すると「成功」とみなされます。スコア（段数）が加算され、次の餅が出現します。
    - **失敗 (ゲームオーバー)**:
        - 餅が土台から大きく外れて落下した場合。
        - 積み上げた塔が崩れ、画面外に落ちた場合。

4.  **ゲームオーバー演出**:
    - 失敗すると、最後に「橙（だいだい）」と「葉っぱ」が落下してきて、積み上がった餅の頂上に乗ります（鏡餅の完成）。
    - 最終スコアと、その高さに相当する建造物などの比較テキストが表示されます。
    - 「再挑戦」ボタンでリセット可能です。

5.  **視覚効果**:
    - 積めば積むほど視点が上にスクロールしていきます（カメラ追従）。
    - 背景はお正月らしい和紙風のテクスチャ。
    - 餅は白く、少し柔らかい挙動（restitution）を持ちます。

## 想定される挙動 (Expected Behavior)
- **タップ時の反応**: タップした瞬間に餅の水平移動が停止し、物理エンジンにより落下を開始します。
- **物理挙動**: 餅は完全な剛体ではなく、少し弾力があり、積み上がるとグラグラと揺れる不安定さがあります。これにより「積む難しさ」を表現しています。
- **レスポンシブ**: スマートフォン、タブレット、PCのいずれの画面サイズでも、キャンバスが適切にリサイズされてプレイ可能です。

## ディレクトリ構成
```
kagamimochi-game/
├── index.html        # エントリーポイント
├── package.json      # 依存関係定義
├── README.md         # プロジェクトドキュメント（本ファイル）
├── public/           # 静的アセット
└── src/
    ├── main.js       # ゲームロジック（Matter.js制御、イベントハンドリング）
    └── style.css     # スタイル定義
```

## 開発・実行方法
1. **インストール**: `npm install`
2. **ローカル実行**: `npm run dev`
3. **ビルド**: `npm run build`
